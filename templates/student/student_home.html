{% extends "student/head_foot_student.html" %}

{% block content %}


<div class="gradient-bg text-center d-flex flex-column align-items-center justify-content-center"
    style="min-height: 100vh; margin-top: 80px;">
    {% if messages %}
    <div style="margin-bottom: 1rem;">
        {% for message in messages %}
        <div class="alert {% if 'error' in message.tags %}alert-danger{% else %}alert-success{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <h1 class="mb-5 text-white display-4 fw-bold">Attendance Dashboard</h1>

    <div class="d-flex gap-5 flex-wrap justify-content-center">

        <!-- Progress Arc 1 -->
        <div class="progress-circle-wrapper">
            <svg class="progress-ring" width="220" height="220">
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#0b85cb;" />
                        <stop offset="100%" style="stop-color:#00ff88;" />
                    </linearGradient>
                </defs>
                <circle class="progress-ring__background" stroke="#ccc" stroke-width="15" fill="transparent" r="100"
                    cx="110" cy="110" />
                <circle class="progress-ring__circle" stroke="url(#grad1)" stroke-width="15" fill="transparent" r="100"
                    cx="110" cy="110" style="stroke-dasharray: 628; stroke-dashoffset: {{ stroke_offset1 }};">
                </circle>
                <text text-anchor="middle" fill="#fff" style="text-shadow: 1px 1px 5px rgba(0,0,0,0.5);">
                    <tspan x="50%" y="106" font-size="28" font-weight="bold">{{ progress1 }}%</tspan>
                    <tspan x="50%" y="129" font-size="14" font-weight="normal">in this sem</tspan>
                </text>
            </svg>
        </div>

        <!-- Progress Arc 2 -->
        <div class="progress-circle-wrapper">
            <svg class="progress-ring" width="220" height="220">
                <defs>
                    <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#0b85cb;" />
                        <stop offset="100%" style="stop-color:#00ff88;" />
                    </linearGradient>
                </defs>
                <circle class="progress-ring__background" stroke="#ccc" stroke-width="15" fill="transparent" r="100"
                    cx="110" cy="110" />
                <circle class="progress-ring__circle" stroke="url(#grad2)" stroke-width="15" fill="transparent" r="100"
                    cx="110" cy="110" style="stroke-dasharray: 628; stroke-dashoffset: {{ stroke_offset2 }};">
                </circle>
                <text text-anchor="middle" fill="#fff" style="text-shadow: 1px 1px 5px rgba(0,0,0,0.5);">
                    <tspan x="50%" y="106" font-size="28" font-weight="bold">{{ progress2 }}%</tspan>
                    <tspan x="50%" y="129" font-size="14" font-weight="normal">in this month</tspan>
                </text>
            </svg>
        </div>

    </div>

    <center>
        <div style="margin-top: 5vw;">
            <a href="{% url 'view_all_student_att' %}" class="btn btn-primary">View Attendance</a>
            <a href="{% url 'view_report_card_student' reg_id %}" class="btn btn-primary" style="margin: 2vw;">View Report Card</a>
            <a href="{% url 'time_table_student' %}" class="btn btn-primary">View Time Table</a>
        </div>
    </center>

    <div style="margin-top: 2vw;">
        <center>
            <a href="{% url 'change_password_student' reg_id %}" class="btn btn-warning">Change Password</a>
        </center>
    </div>
</div>


<style>
    .gradient-bg {
        background: linear-gradient(135deg, #d63384, #6f42c1, #007bff);
        padding: 4vw 0;
    }

    .progress-circle-wrapper {
        display: inline-block;
        position: relative;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.05);
        padding: 1rem;
    }

    .progress-ring__circle {
        transition: stroke-dashoffset 1s ease-in-out;
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
    }

    .progress-ring__background {
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
    }
</style>

{% endblock %}